{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/bean.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\n\nfunction OrderFormComponent_option_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 2);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const bean_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", bean_r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\" \", bean_r3.name, \" (\", bean_r3.country, \") - \", i0.ɵɵpipeBind2(2, 4, bean_r3.cost, \"GBP\"), \" \");\n  }\n}\n\nfunction OrderFormComponent_p_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"strong\");\n    i0.ɵɵtext(2, \"Price per unit:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(4, 1, ctx_r1.selectedBean.cost, \"GBP\"), \"\");\n  }\n}\n\nfunction OrderFormComponent_p_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.message);\n  }\n}\n\nexport let OrderFormComponent = /*#__PURE__*/(() => {\n  class OrderFormComponent {\n    constructor(beanService) {\n      this.beanService = beanService;\n      this.beans = [];\n      this.selectedBean = null;\n      this.quantity = 1;\n      this.customerName = '';\n      this.address = '';\n      this.message = null;\n    }\n\n    ngOnInit() {\n      // Fetch all beans for dropdown\n      this.beanService.getAll().subscribe({\n        next: data => this.beans = data,\n        error: err => {\n          console.error('Failed to fetch beans', err);\n          this.message = 'Failed to load beans. Please try again later.';\n        }\n      });\n    }\n\n    get total() {\n      return (this.selectedBean?.cost || 0) * this.quantity;\n    }\n\n    placeOrder() {\n      if (!this.selectedBean || !this.selectedBean.id) {\n        this.message = 'Please select a bean first.';\n        return;\n      }\n\n      if (!this.customerName.trim() || !this.address.trim()) {\n        this.message = 'Please provide your name and address.';\n        return;\n      }\n\n      if (this.quantity <= 0) {\n        this.message = 'Quantity must be at least 1.';\n        return;\n      }\n\n      const order = {\n        customerName: this.customerName.trim(),\n        address: this.address.trim(),\n        beanId: this.selectedBean.id,\n        quantity: this.quantity\n      };\n      console.log('Sending order:', order);\n      this.beanService.placeOrder(order).subscribe({\n        next: () => {\n          this.message = 'Order placed successfully!'; // Reset form\n\n          this.selectedBean = null;\n          this.customerName = '';\n          this.address = '';\n          this.quantity = 1;\n        },\n        error: err => {\n          console.error('Order placement failed:', err);\n          this.message = 'Failed to place order. Please try again.';\n        }\n      });\n    }\n\n  }\n\n  OrderFormComponent.ɵfac = function OrderFormComponent_Factory(t) {\n    return new (t || OrderFormComponent)(i0.ɵɵdirectiveInject(i1.BeanService));\n  };\n\n  OrderFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderFormComponent,\n    selectors: [[\"app-order-form\"]],\n    decls: 31,\n    vars: 12,\n    consts: [[1, \"order-form\"], [\"name\", \"bean\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"type\", \"text\", \"name\", \"customerName\", \"placeholder\", \"Enter your name\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"address\", \"placeholder\", \"Enter your address\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"name\", \"quantity\", \"min\", \"1\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"message\", 4, \"ngIf\"], [3, \"click\"], [1, \"message\"]],\n    template: function OrderFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \"Order Bean\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"p\")(4, \"strong\");\n        i0.ɵɵtext(5, \"Select Bean:\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"select\", 1);\n        i0.ɵɵlistener(\"ngModelChange\", function OrderFormComponent_Template_select_ngModelChange_6_listener($event) {\n          return ctx.selectedBean = $event;\n        });\n        i0.ɵɵelementStart(7, \"option\", 2);\n        i0.ɵɵtext(8, \"-- Choose a bean --\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(9, OrderFormComponent_option_9_Template, 3, 7, \"option\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, OrderFormComponent_p_10_Template, 5, 4, \"p\", 4);\n        i0.ɵɵelementStart(11, \"p\")(12, \"strong\");\n        i0.ɵɵtext(13, \"Name:\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"input\", 5);\n        i0.ɵɵlistener(\"ngModelChange\", function OrderFormComponent_Template_input_ngModelChange_14_listener($event) {\n          return ctx.customerName = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p\")(16, \"strong\");\n        i0.ɵɵtext(17, \"Address:\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function OrderFormComponent_Template_input_ngModelChange_18_listener($event) {\n          return ctx.address = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"p\")(20, \"strong\");\n        i0.ɵɵtext(21, \"Quantity:\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function OrderFormComponent_Template_input_ngModelChange_22_listener($event) {\n          return ctx.quantity = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"p\")(24, \"strong\");\n        i0.ɵɵtext(25, \"Total:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(26);\n        i0.ɵɵpipe(27, \"currency\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(28, OrderFormComponent_p_28_Template, 2, 1, \"p\", 8);\n        i0.ɵɵelementStart(29, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function OrderFormComponent_Template_button_click_29_listener() {\n          return ctx.placeOrder();\n        });\n        i0.ɵɵtext(30, \"Place Order\");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedBean);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngValue\", null);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.beans);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedBean);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.customerName);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.address);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.quantity);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(27, 9, ctx.total, \"GBP\"), \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.message);\n      }\n    },\n    directives: [i2.SelectControlValueAccessor, i2.RequiredValidator, i2.NgControlStatus, i2.NgModel, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i3.NgForOf, i3.NgIf, i2.DefaultValueAccessor, i2.MinValidator, i2.NumberValueAccessor],\n    pipes: [i3.CurrencyPipe],\n    styles: [\".order-form[_ngcontent-%COMP%]{max-width:400px;margin:1rem auto;padding:1.5rem;background:#fff;border-radius:12px;box-shadow:0 2px 6px #0000001a;font-family:Arial,sans-serif}.order-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.4rem;text-align:center;color:#333}.order-form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:.95rem;color:#444}.order-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .order-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .order-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.5rem;margin:.25rem 0 1rem;border:1px solid #ccc;border-radius:6px;font-size:1rem;background-color:#fafafa;transition:border .2s ease,background .2s ease}.order-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .order-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#2b7a0b;background-color:#fff}.order-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#2b7a0b;color:#fff;font-size:1rem;font-weight:700;border:none;border-radius:8px;cursor:pointer;transition:background .2s ease,transform .1s ease}.order-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#256708;transform:translateY(-1px)}.order-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(0)}.order-form[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;font-weight:700;font-size:.95rem}.order-form[_ngcontent-%COMP%]   .message.success[_ngcontent-%COMP%]{color:#2b7a0b}.order-form[_ngcontent-%COMP%]   .message.error[_ngcontent-%COMP%]{color:#c0392b}\"]\n  });\n  return OrderFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}