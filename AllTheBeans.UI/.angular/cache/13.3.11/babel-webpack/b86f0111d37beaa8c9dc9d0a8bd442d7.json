{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/bean.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\n\nfunction BeanListComponent_div_6_div_12_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 9);\n  }\n\n  if (rf & 2) {\n    const bean_r1 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵproperty(\"src\", bean_r1.image, i0.ɵɵsanitizeUrl)(\"alt\", bean_r1.name);\n  }\n}\n\nfunction BeanListComponent_div_6_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtemplate(1, BeanListComponent_div_6_div_12_img_1_Template, 1, 2, \"img\", 8);\n    i0.ɵɵelementStart(2, \"p\")(3, \"strong\");\n    i0.ɵɵtext(4, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\")(7, \"strong\");\n    i0.ɵɵtext(8, \"Colour:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const bean_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", bean_r1.image);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", bean_r1.description, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", bean_r1.colour, \"\");\n  }\n}\n\nfunction BeanListComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵlistener(\"click\", function BeanListComponent_div_6_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const bean_r1 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.toggleDetails(bean_r1.id);\n    });\n    i0.ɵɵelementStart(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\")(4, \"strong\");\n    i0.ɵɵtext(5, \"Country:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\")(8, \"strong\");\n    i0.ɵɵtext(9, \"Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, BeanListComponent_div_6_div_12_Template, 10, 3, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const bean_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(bean_r1.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", bean_r1.country, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(11, 4, bean_r1.cost, \"GBP\"), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.expandedBeanId === bean_r1.id);\n  }\n}\n\nexport let BeanListComponent = /*#__PURE__*/(() => {\n  class BeanListComponent {\n    constructor(beanService) {\n      this.beanService = beanService;\n      this.beans = [];\n      this.filteredBeans = [];\n      this.searchTerm = '';\n      this.expandedBeanId = null; // for collapsible details\n    }\n\n    ngOnInit() {\n      this.loadBeans();\n    }\n\n    loadBeans() {\n      this.beanService.getAll().subscribe({\n        next: data => {\n          this.beans = data;\n          this.filteredBeans = data;\n        },\n        error: err => console.error('Failed to fetch beans', err)\n      });\n    }\n\n    onSearch() {\n      const term = this.searchTerm.toLowerCase().trim();\n\n      if (!term) {\n        this.filteredBeans = this.beans;\n        return;\n      }\n\n      this.filteredBeans = this.beans.filter(bean => bean.name.toLowerCase().includes(term) || (bean.country ?? '').toLowerCase().includes(term));\n    }\n\n    toggleDetails(beanId) {\n      this.expandedBeanId = this.expandedBeanId === beanId ? null : beanId;\n    }\n\n  }\n\n  BeanListComponent.ɵfac = function BeanListComponent_Factory(t) {\n    return new (t || BeanListComponent)(i0.ɵɵdirectiveInject(i1.BeanService));\n  };\n\n  BeanListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BeanListComponent,\n    selectors: [[\"app-bean-list\"]],\n    decls: 7,\n    vars: 2,\n    consts: [[1, \"bean-list\"], [1, \"search-bar\"], [\"type\", \"text\", \"placeholder\", \"Search by name or country...\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"bean-grid\"], [\"class\", \"bean-card\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"bean-card\", 3, \"click\"], [\"class\", \"bean-details\", 4, \"ngIf\"], [1, \"bean-details\"], [3, \"src\", \"alt\", 4, \"ngIf\"], [3, \"src\", \"alt\"]],\n    template: function BeanListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \"Available Beans\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 1)(4, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function BeanListComponent_Template_input_ngModelChange_4_listener($event) {\n          return ctx.searchTerm = $event;\n        })(\"input\", function BeanListComponent_Template_input_input_4_listener() {\n          return ctx.onSearch();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵtemplate(6, BeanListComponent_div_6_Template, 13, 7, \"div\", 4);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.searchTerm);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.filteredBeans);\n      }\n    },\n    directives: [i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.NgForOf, i3.NgIf],\n    pipes: [i3.CurrencyPipe],\n    styles: [\".bean-list[_ngcontent-%COMP%]{max-width:1000px;margin:auto;padding:1rem}.search-bar[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60%;padding:.5rem;border:1px solid #ccc;border-radius:8px;font-size:1rem}.bean-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));grid-gap:1rem;gap:1rem}.bean-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 6px #0000001a;padding:1rem;cursor:pointer;transition:transform .2s ease}.bean-card[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.bean-details[_ngcontent-%COMP%]{margin-top:1rem}.bean-details[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:150px;object-fit:cover;border-radius:8px;margin-bottom:.5rem}\"]\n  });\n  return BeanListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}